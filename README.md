## summary

本项目主要分为两个部分，爬虫及社会网络分析，项目分阶段运行，由于微博数据量较大，爬虫运行需花费一定时间，在爬取期望主题在对应时间段的数据后，调用社会网络分析的模块，进行社会网络分析、可视化以及SIR建模与预测。

## 项目配置与运行

### 项目配置

建议使用终端运行，首先cd到WeiboSpider目录下，运行`pip install -r requirements`来安装项目所需要的包。

### 爬虫运行

爬虫需配置cookie及具体的爬取主题和时间段，cd到WeiboSpider/weibospider目录下，`config.py`为主题及时间段所对应配置，其中含具体模板。然后打开微博，登录自己的账号，由F12/network，找到名为weibo.com的数据包，复制其中的cookie替换本地文件中的cookie。

爬虫需运行三个文件，有具体的顺序要求。在WeiboSpider/weibospider目录下，依次运行`python crawler_keyword.py  --->python crawler_tweetid.py -->python crawler_userid.py`即可爬取所需的数据，具体的数据内容保存在output目录下。

### 社会网络分析

社会网络分析和建模依赖一些包，pip安装`streamlit networkx streamlit_echarts pyecharts`四个主要的包，然后在根目录下运行`streamlit run app.py`即可在本地端口打开项目运行，其会加载本地爬取的最新数据，进行分析、建模、预测以及可视化。

## 爬虫部分

爬虫部分基于WeiboSpider进行二次开发，在其基础模块的基础上增加具体的本地传输、个性化主题定制等，Spider项目的详情可访问github，其中包含微博各维度数据爬取。

## 社会网络分析

### 关系网络搭建
1. 用户关系网络的搭建基于事件中帖子的转发关系，如果一篇帖子被另一个人转发，则转发的用户与源帖子的拥有用户构成一次转发关系
2. 构建的关系网络中，节点为用户，用户之间依靠转发关系构建联系
3. 网络节点存在影响力大小，此处主要提供三大指标
    - 用户在该事件中所有帖子的转发量总和
    - 用户在该事件中所有帖子的点赞量总和
    - 用户的粉丝基数
    影响力最终由这三个指标加权得到，作为节点的大小
4. 网络节点的重要性指标计算
    - 节点的度中心性
    - 节点的介数中心性
    - 节点的紧密中心性

中心性越高，说明节点的重要性越高


### S-I-R传播模型

#### introduction
SIR模型是最早的传染病传播模型之一，它是一个基于微分方程的传染病传播模型，由三个状态方程组成，分别是易感者(S)，感染者(I)和康复者(R)。SIR模型是一个典型的动力学模型，它描述了传染病在人群中的传播过程。
在信息传播领域，SIR模型也被广泛应用于舆情传播、情感传播等研究中。此时，SIR模型中的易感者、感染者和康复者分别对应了信息传播中的未接触者、接触者和传播者。
SIR模型的基本假设是：人群中的每个个体都是同质的，即每个个体的易感性、感染性和康复性都是相同的。此外，SIR模型还假设人群是封闭的，即人群中的个体不会因为外部因素而增加或减少。
具体的传播形式如下：
S(t+1) = S(t) - β * S(t) * I(t)
I(t+1) = I(t) + β * S(t) * I(t) - γ * I(t)
R(t+1) = R(t) + γ * I(t)

##### 参数说明
S(t)：健康人数
I(t)：感染人数
R(t)：康复人数
β：感染率
γ：康复率
'''

'''
### references

[1] 郑志蕴, 郭芳, 王振飞, 等. 基于行为分析的微博传播模型研究[J]. 计算机科学, 2016, 43(12): 41-45.\n
[2] 魏静, 黄阳, 江豪, 等. 基于改进 SIR 模型的微博网络舆情传播研究[J]. 情报科学, 2019, 37(6): 16-22.\n
[3] 徐沛东, 马力, 李培. 基于 SIR 模型的情感网络传播分析[J]. 计算机与数字工程, 2018, 46(4): 659-662.